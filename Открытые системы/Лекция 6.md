## Про FAT и файловые системы в целом

* FAT (File Allocation Table) - файловая система. Придумана в начале 1970-х годов.
* Дисковое пространство можно разделить на два сегмента:
	1. Системный. Тут хранится сама таблица, причем в количестве 2(!) штук.
		* В FAT32 таких таблиц уже целых 3
	2. Сегмент данных. Тут хранятся сами данные
Изначально было ограничение в 128 описателей файлов, что после было увеличено до 512 (это ограничение, с точки зрения пользователя, отражается в максимальном количестве файлов в корневом каталоге). Но если требуется иметь бОльшее количество, уже нужно создавать файлы-каталоги.

Какие данные хранятся в описателе файлов:
	1. name - название файла. 
	2. Атрибуты файлов:
		* Их изначально всего 4 (причем на каждый из них вообще выделено по 1 биту), остальные считаются расширенными:
		1. r (Read-Only) - файл доступен только для чтения. Формально, его 
		2. h (Hidden) - файл является скрытым. Можно увидеть только при выставлении соответствующей настройки в менеджере файлов.
		3. s (System) - файл является системным. Такие файлы нельзя никак менять и шифровать не системой, иначе система сломается.
		4. a (Archive) - файл является архивным. Такой файл, например, создается при бэкапе данных. 
		5.  ВременнЫе атрибуты (дата и время с точностью до миллисекунды):
			* Создания
			* Последнего изменения
			* Последнего открытия
		6. N - номер первого кластера, который содержит файл. А в ячейке таблицы FAT, которая указана как ячейка номера нашего первого кластера, указывался номер следующего кластера. Последний кластер
			* Изначально в FAT использовалось всего 12 битов для нумерации, после начали использовать 16 бит.
	* Фан факт: в NTFS (так же файловая система) на один элемент таблицы выделяется в районе 1Кб
FAT(12)->FAT(16)->FAT(32)
* В FAT32 из 32 битов под нумерацию кластеров отводится только 28 бит.
* Под одну таблицу FAT32 тогда будет отводиться 1Гб (!), а таких таблиц вообще 3 создается. Итого, под такую файловую систему нужно выделять 3Гб. Пиздец как много.
* И это все открытое, в отличии от NTFS, которая на Win. Конечно, начали придумывать, как их читать и редачить, но это просто закорраптит весь файл. Так что ты так не делай.
* Из недостатков FAT32 есть ограничение на максимальный размер файла. Поэтому на Линукс используется такая файловая система как EXFAT (да, extended FAT)
* На имя фала принято выделять 256 символов. Такое есть в NTFS. Но в случае с FAT на длинное имя нужно тратить последующий описатель (по 20 символов на описатель). Поэтому там есть ограничение на 56 байт под имя в корневой директории.

* **В UNIX-системах есть 6 типов файлов**, а в NTFS - всего 3.
	* Какие именно типы файлов:
		1. Нормальные файлы.
		2. Файлы-каталоги. 
			* Ограничений на имена всего два - размер имени (256 символов) и там не должно быть "/". Есть рекомендация начинать имя файла с буквы.
			* В случае с поиском файла перебираются не файлы, а расчет номера файла по его имени.
		3. Ссылочные файлы (soft-линки) - символьные ссылки, где значение фала задается другое значение, через которое можно выйти на другой файл.
			* Они используются для связи каталогов, которые хранятся на разных разделах, в корневом. Тогда получится одно пространство имен, что iба чотка.
		4. Файлы устройств
		5. Конвейеры (Pipe)
		6. Сокеты (Sockets)
	* Типы 1-3 используются и в UNIX-подобных, и в NTFS, а остальные только в UNIX-подобных
### Оффтоп про разность логического диска и тома
* **logical disk (логический диск)** - пространство файловой системы, где кластеры неразрывны. Обычно, это какой-то раздел.
* **volume (том, не Джерри)** - это так же файловая система с множеством кластеров, но эти кластеры могут идти и не подряд: они могут быть вообще на разных разделах одного устройства или вообще на разных устройствах.
* В Линуксе мы работаем с томами.

Обозначения каталогов:
	* `./` - работа в текущем каталоге
	* `../` - работа в каталоге уровнем выше
	* Если имя файла начинается с `.` - то это системный файл, который обычно скрыт
* Каталог `/etc` предназначен для хранения конфигов вообще для всего
	* Например, в файле `passwd` хранятся все-все-все пользователи (даже боты для работы демонов)
	* Одна запись расшифровывается по параметрам примерно так:
		1. Имя пользователя для системы
		2. x - показатель, что данные для пользователя лежат в отдельном файле `shadow`. Там лежит и зашифрованная хеш-функция с паролем, итд.
		3. UID
		4. GID
		5. Поле имени входа (login)
		6. Домашний каталог пользователя
		7. Интерпретатор команд для данного пользователя