### FHS

FHS (Filesystem Hierarchy Standart) - стандарт для файловых систем
	* Andrew Tannenbaum - Современные операционные системы (учебник по ОСям, писал, вроде как, в соавторстве). Там описано как писать ОС, начиная с ядра и драйверов.
	* Линус Торвальдс написал одну ОС по данной книге, но в связи с лицензией решился написать свое ядро.

Проблема файловых систем - программы от дистрибутива к дистрибутиву могли не работать
Решение - писать программы и располагать их в системе при помощи sofft-link'ов.

После пришли к решению о стандартизации файловых систем.
Его несколько раз меняли, но последняя версия (2004 год) до сих пор не менялась

ЧТО ВАЖНОГО МОЖНО ВЫДЕЛИТЬ ИЗ СТАНДАРТА:
	* Правильное наименование в корневой директории
	* Все файлы делились на изменяемые и неизменяемые. Неизменяемые - в один каталог, а изменяемые - в другой. Плюс, для изменяемых файлов нужны спец. механизмы (например, когда рассматриваются варианты взаимодействующих процессов и критических ресурсов, [[MortyD14/Операционные системы/Лекция 5|привет лекции с ОпС]])
	* После еще пришли к идее, когда, помимо локальной работы на одном ПК еще была общая локальная сеть со своими файлами
	* По итогу пришли еще к идее разделяемых файлов, которые так же отделялись в отдельный каталог

А теперь про каталоги в стандарте (для примера):
	* `/srv` - каталог для работы с серверными файлами (Web-ресурсы, файловые ресурсы, к которым могли обращаться другие ПК);
	* `/var` - каталог для изменяемых файлов. Если тот же самый изменяемый файл был еще и для общего доступа, то он помещался в каталог внутри данного - `/varshare`
		* Там есть еще каталог `/cache` - там хранятся кеши тех или иных установленных файлов.
		* Эти самые кеши можно было записать как .iso файл - и он работал как установщик.
	* `/bin` - каталог для бианрников (изначально). Прикол в том, что щас этот каталог в корне - нихуя не каталог, а символьная ссылка на `/usr/bin`, причем это было сделано для согласования с UNIX-системами

### Оффтоп про grep
* `grep` - удобная программа для поиска по тексту
* Если сделать команду `ls -l /usr/bin | rep passwd`, то он выведет все файлы, в названии которых есть passwd.
* Знать чужие пароли - строгое табу. Ты можешь править чужие файлы, менять пароли, но от этого останется след (т.к. ты это делаешь от имени своего пользователя).
	* Фан факт: с sudo можно снять требование на пароль, но так делать вообще глупо

* Про смену пароля
	* Процесс passwd может запустить файл shadow от имени любого пользователя, только будет зафиксирован факт того, что именно этот пользователь запустил функцию смены пароля.
	* Обычный пользователь может менять только свой пароль
	* root может менять все пароли
	* Но, опять же, учитывайте, что это все логгируется

### Возврат к FHS

Стандарт - это чисто рекомендация, но не обязательный момент

Снова про каталоги:
	* `/boot` - каталог для загрузчика системы. Он может монтироваться в EFI или на отдельный раздел или так же в корень
	* `/dev` - каталог для файлов устройств. Фактически, файл устройства является ссылкой на нужный драйвер, НО устройства могут ссылаться на один драйвер, просто у них будут разные конфигурации.
		* Устройства могут быть как нормальными, так и псевдо-. Примером такого псевдо может быть функция random (генератор случайного значения). Просто для того, чтоб было удобнее. Еще псевдоустройства - null, zero
		* Также там есть файлы 
	* `/etc` - некий аналог реестра. По сути, это БД с параметрами конфигурационных служб. по умолчанию (самые необходимые). Он читается во время запуска ОС и вечно лежит в оперативе.
		* Реестров в UNIX нет. Впервые их ввели в Mac, после они перешли в Microsoft. Но штука сомнительная, а продолжают их использовать из-за наследия и трудности их вырезания.
	* `/lib` и `/lib64` - библиотеки для работы системных служб, модули ядра и прочей базовой необходимой штуки для ОС. В `/lib` лежат все старые необходимые файлы, а в `/lib64` - все новые, 64-битные файлы
		* В linux эти файлы лежат в каталоге `/usr`, а в корне - это символьные ссылки с полным доступом (потому что иначе они бы не работали)
		* Если перейти к самому каталогу, то полный доступ есть только у root, а у остальных - только права на чтение и исполнение ~~кульбитов~~
	* `/lost+found` - спец каталог, доступ к которому есть только у root. Туда отправляются те файлы, inode которых остаются бесхозными и аварийными (то ли они закрылись некорректно). root уже эти файлы как-либо раздавать или как-то с ними работать.
	* `/media` - внешние устройства постоянной памяти - CD-ROM (DVD) и USB. 
		* Для каждого пользователя в этом каталоге будут лежать те устройства (их uid), которые были установлены именно этим пользователем
	* `/mnt` - для подключения тех устройств с каталогами, которые мы подключаем при выключенном ПК. Например, новые ssd. Благодаря этому мы осуществляем монтирование (об этом будет разговор будет дальше). Там свои приколы.
	* `/opt` - для установки дополнительного ПО, хотя для этого используется каталог `/usr` (вот вам и несоблюдение стандартов)
	* `/proc` - ебанутый каталог. Внутри него дохуя папок с чисто цифровыми именами. Нахуй это надо - туда отлетают все данные об активных процессах (в папку отлетает процесс в соответствии со своим PID).
		* Например, в папку `/proc/1` отлетает процесс init (нынче SYSTEMD). И в этой самой папке будут каталоги `net` для управления сетью, `task` итд
		* Помимо номерных папок есть еще и спец. файлы. Например, `uptime` - процесс, выводящий сколько пользователей щас работают, какая загрузка у системы.
	* `/root` - домашний каталог для root'а
	* `/run` - специальный каталог именно для активных файлов. Там можно найти данные о ходе их выполнения.
		* По отношению к диспетчеризации есть три касты процессов:
			1. Процессы, что должны закончиться к определенному времени (если они не закончатся к этому времени, то это наебнет систему) (у них приоритеты статические, pri)
			2. Процессы, реального времени (у них нет второй составляющей приоритета - nice (это динамическая диспетчеризация))
			3. Процессы реального времени, но уже с nice (процесс с наименьшим отработанным процессорным временем будет обслуживаться более приоритетным)
	* `/sys` - каталог системных файлов. Используется для работы с ядром и доступа к информации о системе.
	* `/tmp` - каталог для временных файлов. Для этого каталога лучше всего использовать не отдельный сегмент диска на локальном устройстве, а сервер.

Вот вам пример структуры файловой системы в Astra Linux
![[MortyD14/Photo/alse_mod6_image4.png|]]